<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>餐点管理-配餐模式</title>
		<link rel="stylesheet" href="assert/css/bootstrap.min.css">
		<link rel="stylesheet" href="assert/css/order.css">
		<style type="text/css">
			body {
				/*padding: 50px 0px;*/
				/*background-color: #f5f5f5;*/
			}
		</style>
	</head>
	<body>
		<div class="row-fluid container-fixed">
			<div class="span12">
				<div class="querybar">
					<div class="row-fluid">
						<div class="span5">
						</div>
						<div class="span3">
						</div>
						<div class="span4">
							<button type="button" class="btn" id="btn_edit" data-toggle="button"><i class="icon-pencil"></i>编辑</button>
							<a class="btn" href="#dialog-add-category" data-toggle="modal"><i class="icon-plus"></i>添加分类</a>
							<a class="btn" href="#dialog-add-package" data-toggle="modal"><i class="icon-plus"></i>添加套餐</a>
						</div>
					</div>
				</div>
				<div class="category">
					<ul>
						<li>
							<label class="checkbox"><input type="checkbox" value="">25元区</label>
						</li>
						<li>
							<label class="checkbox"><input type="checkbox">20元区</label>
						</li>
						<li>
							<label class="checkbox"><input type="checkbox">18元区</label>
						</li>
						<li>
							<label class="checkbox"><input type="checkbox">15元区</label>
						</li>
					</ul>
				</div>
				<table id="tb_foods" class="foods-area">
					<tr>
						<td class="food-area-head">25元区</td>
						<td>
							<ul class="food-area-list item-list img-text-below">
								<li>
									<div>
										<img src="assert/img/taochan2.jpg" alt=""><span>香汁排骨套餐</span>
										<div class="btns">
											<i class="icon-leaf" title="缺货标记"></i>
											<i class="icon-edit" title="编辑食物"></i>
											<i class="icon-remove" title="删除食物"></i>
										</div>
									</div>
								</li>
								<li><img src="assert/img/taochan2.jpg" alt=""><span>香汁排骨套餐</span></li>
								<li><img src="assert/img/taochan2.jpg" alt=""><span>香汁排骨套餐</span></li>
								<li><img src="assert/img/taochan2.jpg" alt=""><span>香汁排骨套餐</span></li>
								<li><img src="assert/img/taochan2.jpg" alt=""><span>香汁排骨套餐</span></li>
								<li><img src="assert/img/taochan2.jpg" alt=""><span>香汁排骨套餐</span></li>
								<li><img src="assert/img/taochan2.jpg" alt=""><span>香汁排骨套餐</span></li>
								<li><img src="assert/img/plus.png" class="food-add" alt=""></li>
							</ul>
						</td>
					</tr>
					<tr>
						<td class="food-area-head">20元区</td>
						<td>
							<ul class="food-area-list item-list img-text-below">
								<li><img src="assert/img/taochan1.jpg" alt=""><span>鼎香肥牛套餐</span></li>
								<li><img src="assert/img/taochan1.jpg" alt=""><span>鼎香肥牛套餐</span></li>
								<li><img src="assert/img/taochan1.jpg" alt=""><span>鼎香肥牛套餐</span></li>
								<li><img src="assert/img/taochan1.jpg" alt=""><span>鼎香肥牛套餐</span></li>
								<li><img src="assert/img/plus.png" class="food-add" alt=""></li>
							</ul>
						</td>
					</tr>
					<tr>
						<td class="food-area-head">18元区</td>
						<td>
							<ul class="food-area-list item-list img-text-below">
								<li><img src="assert/img/taochan3.jpg" alt=""><span>鸡腿豆腐青菜套餐</span></li>
								<li><img src="assert/img/taochan3.jpg" alt=""><span>鸡腿豆腐青菜套餐</span></li>
								<li><img src="assert/img/taochan3.jpg" alt=""><span>鸡腿豆腐青菜套餐</span></li>
								<li><img src="assert/img/plus.png" class="food-add" alt=""></li>
							</ul>
						</td>
					</tr>
					<tr>
						<td class="food-area-head">15元区</td>
						<td>
							<ul class="food-area-list item-list img-text-below">
								<li><img src="assert/img/plus.png" alt="" class="food-add"></li>
							</ul>
						</td>
					</tr>
				</table>
			
			</div>
		</div><!--/ end of container -->

		<!-- 添加分类窗口 -->
		<div id="dialog-add-category" class="modal hide fade">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3>添加分类</h3>
			</div>
			<div class="modal-body">
				<form action="" class="form-horizontal form-dialog">
					<div class="control-label">
						<div class="addfood-photo-wrapper">
							<img src="" id="group-preview" class="addfood-photo img-rounded" alt="">
						</div>
						<div class="img-tips hide">点击上传图片</div>
						<input type="file" id="group-upload" name="file" class="hide">
					</div>
					<div class="controls controls-clear-right">
						<div class="control-group control-group-small">
							<label for="" class="control-label">分类</label>
							<div class="controls"><input type="text" name="groupName"></div>
						</div>
						<div class="control-group control-group-small">
							<label for="" class="control-label">描述</label>
							<div class="controls"><textarea name="detail" rows="4" ></textarea></div>
						</div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn btn-primary">保存</a>
				<a href="#" class="btn" data-dismiss="modal" aria-hidden="true">关闭</a>
			</div>
		</div><!--/ end of 添加分类 -->

		<!-- 添加套餐窗口 -->
		<div id="dialog-add-package" class="modal hide fade">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3>添加套餐</h3>
			</div>
			<div class="modal-body">

				<!-- Step 1 -->
				<form action="" class="form-horizontal form-dialog" id="form-add-package-step1">
					<div class="control-group">
						<div class="control-label">
							<div class="addfood-photo-wrapper"><img src="assert/img/taochan3.jpg" class="addfood-photo img-rounded" id="addfood-photo" alt=""></div>
							<div class="img-tips hide" id="addfood-photo-tips">点击上传图片</div>
						</div>
						<div class="controls controls-clear-right">
							<div class="control-group control-group-small">
								<label for="" class="control-label">名称</label>
								<div class="controls"><input type="text"></div>
							</div>
							<div class="control-group control-group-small">
								<label for="" class="control-label">分类</label>
								<div class="controls">
									<select name="" id="">
										<option value="">25元区</option>
										<option value="">20元区</option>
										<option value="">18元区</option>
										<option value="">15元区</option>
									</select>
								</div>
							</div>
							<div class="control-group control-group-small">
								<label for="" class="control-label">原价</label>
								<div class="controls">
									<!-- <input type="text"> -->
									<div class="input-prepend input-append">
										<span class="add-on">&yen;</span>
										<input id="price" type="text" style="width:153px;">
										<span class="add-on">元</span>
									</div>
								</div>
							</div>
							<div class="control-group control-group-small">
								<label for="" class="control-label">现价</label>
								<div class="controls">
									<!-- <input type="text"> -->
									<div class="input-prepend input-append">
										<span class="add-on">&yen;</span>
										<input id="price" type="text" style="width:153px;">
										<span class="add-on">元</span>
									</div>
								</div>
							</div>
							<div class="control-group control-group-small">
								<label for="" class="control-label">库存</label>
								<div class="controls"><input type="text"></div>
							</div>

						</div>
					</div>
					<div class="control-group control-group-mini control-group-left addfood-describe">
						<label for="" class="control-label">介绍</label>
						<div class="controls">
							<textarea name="" rows="3" ></textarea>
						</div>
					</div>

					<div class="pull-right">
						<label class="checkbox inline"><input type="checkbox" value="">缺货标记</label>
						<label class="checkbox inline"><input type="checkbox" value="">下架</label>
					</div>
				</form><!--/ end of Step 1 -->

				<!-- step 2 -->
				<form action="" class="form-horizontal hide" id="form-add-package-step2">
					<table class="foods-area add-package">
						<tr>
							<td class="food-area-head">25元区</td>
							<td>
								<ul class="food-area-list item-list img-text-below">
									<li>
										<label>
											<img src="assert/img/taochan2.jpg" alt="">
											<span>深井烧鸭套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
									<li>
										<label>
											<img src="assert/img/taochan2.jpg" alt="">
											<span>深井烧鸭套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
									<li>
										<label>
											<img src="assert/img/taochan2.jpg" alt="">
											<span>深井烧鸭套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
									<li>
										<label>
											<img src="assert/img/taochan2.jpg" alt="">
											<span>深井烧鸭套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
									<li>
										<label>
											<img src="assert/img/taochan2.jpg" alt="">
											<span>深井烧鸭套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
									<li>
										<label>
											<img src="assert/img/taochan2.jpg" alt="">
											<span>深井烧鸭套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
									<li>
										<label>
											<img src="assert/img/taochan2.jpg" alt="">
											<span>深井烧鸭套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
								</ul>
							</td>
						</tr>
						<tr>
							<td class="food-area-head">20元区</td>
							<td>
								<ul class="food-area-list item-list img-text-below">
									<li>
										<label>
											<img src="assert/img/taochan1.jpg" alt="">
											<span>孜然羊肉套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
									<li>
										<label>
											<img src="assert/img/taochan1.jpg" alt="">
											<span>孜然羊肉套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
									<li>
										<label>
											<img src="assert/img/taochan1.jpg" alt="">
											<span>孜然羊肉套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
									<li>
										<label>
											<img src="assert/img/taochan1.jpg" alt="">
											<span>孜然羊肉套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
								</ul>
							</td>
						</tr>
						<tr>
							<td class="food-area-head">18元区</td>
							<td>
								<ul class="food-area-list item-list img-text-below">
									<li>
										<label>
											<img src="assert/img/taochan3.jpg" alt="">
											<span>香汗排骨套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
									<li>
										<label>
											<img src="assert/img/taochan3.jpg" alt="">
											<span>香汗排骨套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
									<li>
										<label>
											<img src="assert/img/taochan3.jpg" alt="">
											<span>香汗排骨套餐</span>
											<input type="checkbox" value=""/>
										</label>
									</li>
								</ul>
							</td>
						</tr>
					</table>

					
				</form><!--/ end of Step 2 -->

			</div>
			<div class="modal-footer">

				<div class="control-group control-group-small control-group-left add-package hide" id="modal-footer-food-select">
					<label for="" class="control-label">已添加</label>
					<div class="controls food-to-add">
						<ul class="food-area-list item-list img-text-below">
							<li><img src="assert/img/mifan.jpg" alt=""><span>米饭</span></li>
							<li><img src="assert/img/chaixin.jpg" alt=""><span>菜心</span></li>
						</ul>
					</div>
				</div>

				<a href="#" class="btn hide" id="btn_prev" aria-hidden="true">上一步</a>
				<a href="#" class="btn btn-primary next" id="btn_done">下一步</a>
			</div>
		</div><!--/ end of 添加食物 -->


		<script type="text/javascript" src="assert/js/jquery-1.8.0.js"></script>
		<script type="text/javascript" src="assert/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="assert/js/jquery.pagination.js"></script>
		<script type="text/javascript">

			jQuery(function ($) {

				$(".foods-area .food-add").click(function () {
					$("#dialog-add-package").modal();
				});

				$(".addfood-photo-wrapper").hover(function () {
					$(this).siblings(".img-tips").removeClass("hide");
				}, function () {
					$(this).siblings(".img-tips").addClass("hide");
				});


				// 添加套餐,保存&下一步
				$("#btn_done").click(function() {
					var $this = $(this), 
						$prev = $("#btn_prev");
					if($this.hasClass("next")) { // next
						$this.html("保存").removeClass("next");
						$prev.removeClass("hide");

						$("#form-add-package-step1").addClass("hide");
						$("#form-add-package-step2").removeClass("hide");
						$("#dialog-add-package").addClass("dialog-select-food");
						$("#modal-footer-food-select").removeClass("hide");
						
					}
				});

				// 上一步
				$("#btn_prev").click(function() {
					var $next = $("#btn_done");
					$next.html("下一步").addClass("next");
					$(this).addClass("hide");

					$("#form-add-package-step2").addClass("hide");
					$("#form-add-package-step1").removeClass("hide");
					$("#dialog-add-package").removeClass("dialog-select-food");
					$("#modal-footer-food-select").addClass("hide");
				});

				// edit button
				toggle("btn_edit", function(checked) {

					var $tbFoods = $("#tb_foods");
					if(checked) {
						$tbFoods.addClass("edit");
					} else {
						$tbFoods.removeClass("edit");
					}
				});

				$(".foods-area .icon-remove").click(function () {
					console.log("delete a food");
				});

				$(".foods-area .icon-edit").click(function () {
					console.log("edit a food");
				});

				$(".foods-area .icon-leaf").click(function () {
					console.log("mark out of stock");
				});

			});

			/**
			 * single toggle button click event
			 * @param  {string}   id       
			 * @param  {Function} callback 
			 */
			function toggle(id, callback) {
				$("#"+id).click(function () {
					var $this = $(this);
					setTimeout(function() {
						var checked = $this.hasClass("active");
						callback(checked);
					}, 0);
				});
			}

		</script>
	</body>
</html>