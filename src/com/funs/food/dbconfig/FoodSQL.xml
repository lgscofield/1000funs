<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- @author Xingling -->

<!-- 用户 -->
<mapper namespace="com.funs.food">

	<!-- 插入Food信息 -->
	<insert id="insertFood" parameterType="com.funs.food.model.FoodVO">
		INSERT INTO food(code,food_name,detail,image,deleted) VALUES
		(#{code},#{foodName},#{detail},#{image},#{deleted})
	</insert>
	
	<!-- 插入Food_Re_Shop信息 -->
	<insert id="insertFoodReShop" parameterType="com.funs.food.model.FoodVO">
		INSERT INTO food_re_shop(shop_id,food_id,group_id,origin_price,current_price,stock,droped,deleted) VALUES
		(#{shopId},#{foodId},#{groupId},#{originPrice},#{currentPrice},#{stock},#{droped},#{deleted})
	</insert>
	
	<!-- 插入Food_Group信息-->
	<insert id="insertFoodGroup" parameterType="com.funs.food.model.FoodGroupVO">
		INSERT INTO food_group(group_name,image,detail,deleted) VALUES
		(#{groupName},#{detail},#{image},#{deleted})
	</insert>

	<!-- 根据shopId在架的所有Food -->
	<select id="queryFoodsByShopId" parameterType="int"
		resultType="com.funs.food.model.FoodVO">
		SELECT * FROM food f,food_re_shop frs WHERE frs.id=#{shopId} AND f.id=frs.id AND f.deleted=false AND frs.deleted=false
	</select>


	<!-- 查询food表的总行数 -->
	<select id="getCount" resultType="int">
		SELECT COUNT(*) FROM food
	</select>
	
</mapper>